(window.webpackJsonpapp_react=window.webpackJsonpapp_react||[]).push([[0],{111:function(e,t,a){e.exports=a(205)},125:function(e,t){},127:function(e,t){},160:function(e,t){},161:function(e,t){},204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),l=a.n(c),s=a(5),o=a(26),i=a(16),u=a(22),m=a(20),p=a(42);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var g="LOGIN",h="LOGOUT",E="ADD_STACK",b="CREATE_TAG",v="FETCH_USER",y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{payload:f({},e),type:v}},N=a(23),_=a(27),k=a.n(_),O=a(43),j=a(104),w=a.n(j),S=function(e){var t=e.modalType,a=e.modalSwitch,n=r.a.createRef(),c=r.a.createRef(),l=function(e,t){return'query {\n        login(userInput: {name: "'.concat(e,'", pass: "').concat(t,'"}){\n          userId\n          token\n          tokenExpiration\n        }\n      }')},s=function(e,t){return'mutation {\n        createUser(userInput: {name: "'.concat(e,'", pass: "').concat(t,'"}){\n          name\n        }\n      }')},o="logIn"===t?{title:"Log in",forms:[{placeholder:"Username",ref:n},{placeholder:"Password",ref:c,type:"password"}],btn:{value:"Log in"}}:{title:"Sign up",forms:[{placeholder:"Username",ref:n},{placeholder:"Password",ref:c,type:"password"}],btn:{value:"Sign up"}},i=o.title,u=o.forms,m=o.btn,p=function(){var a=Object(O.a)(k.a.mark(function a(r){var o,i,u,m,p,d;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),o=n.current.value,i=c.current.value,a.next=5,w.a.hash(i,12);case 5:if(u=a.sent,console.log(u),m=l(o,i),p={query:m},"signUp"!==t){a.next=14;break}return d={query:s(o,u)},a.next=13,fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()}).then(function(e){}).catch(function(e){console.log(e)});case 13:console.log("signUp");case 14:return a.next=16,fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()}).then(function(t){var a={login:{token:t.data.login.token,status:!0},user:{id:t.data.login.userId}};e.onLogIn(a)}).catch(function(e){console.log(e)});case 16:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal_body"},r.a.createElement("p",{className:"modal_body_title"},i),r.a.createElement("form",{onSubmit:p},u.map(function(e){var t=e.placeholder,a=e.ref,n=e.type;return r.a.createElement("input",{key:t,className:"modal_body_input",placeholder:t,ref:a,type:n})}),r.a.createElement("input",{className:"modal_body_submit",type:"submit",value:m.value,onClick:m.onClick})),r.a.createElement("div",{className:"modal_body_close",onClick:a},"x")))},T=Object(s.b)(function(e){return{login:e.login,user:e.user}},{logIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{payload:f({},e),type:g}},fetchUser:y})(function(e){var t=Object(n.useState)(!1),a=Object(N.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)("logIn"),o=Object(N.a)(s,2),i=o[0],u=o[1];e.login.status&&e.history.push("/stack");var m=function(){l(!c)};return r.a.createElement("div",{className:"wrapper-top"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"top_header"},r.a.createElement("img",{className:"top_header_logo",src:"../img/logo_text.png",alt:"logo"}),r.a.createElement("p",{className:"top_header_log-in",onClick:function(){u("logIn"),m()}},"Log in")),r.a.createElement("div",{className:"top_main"},r.a.createElement("div",{className:"top_main_left"},r.a.createElement("div",{className:"top_main_left_wrapper"},r.a.createElement("p",{className:"top_main_left_catch"},"STACK"),r.a.createElement("p",{className:"top_main_left_catch"},"STACK"),r.a.createElement("p",{className:"top_main_left_catch"},"READ"),r.a.createElement("p",{className:"top_main_left_catch"},"STACK"),r.a.createElement("input",{className:"top_main_left_sign-up",type:"button",defaultValue:"Start Stack",onClick:function(){u("signUp"),m()}}))),r.a.createElement("div",{className:"top_main_right"})),r.a.createElement("div",{className:"top_footer"},r.a.createElement("p",null,"SnR is an indie maker project by Aida"))),c&&r.a.createElement(S,{onLogIn:function(t){var a=t.login,n=t.user;e.logIn(a),e.fetchUser(n)},redirector:function(t){e.history.push(t)},modalType:i,modalSwitch:m}))}),C=a(105),P=a(106),A=a(109),D=a(107),I=a(110),U=Object(s.b)(null,{logOut:function(){return{type:h}}})(function(e){return r.a.createElement("div",{className:"side-nav"},r.a.createElement("div",{className:"side-nav_logo"},r.a.createElement("img",{className:"top_header_logo",src:"../img/logo_text.png",alt:"logo"})),r.a.createElement("div",null,r.a.createElement("ul",{className:"side-nav_links"},r.a.createElement("li",null,r.a.createElement(u.c,{className:"side-nav_links_link",to:"/my"},"My Page")),r.a.createElement("li",null,r.a.createElement(u.c,{className:"side-nav_links_link",to:"/stack"},"Stack")))),r.a.createElement("div",{className:"side-nav_logout"},r.a.createElement("input",{className:"side-nav_logout_btn",type:"button",defaultValue:"Log out",onClick:function(){var t;e.logOut(),t="/",e.history.push(t)}})))}),x=Object(s.b)(function(e){return{login:e.login,user:e.user}},{addStack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{payload:{newStack:e},type:E}}})(function(e){var t=r.a.createRef(),a=r.a.createRef(),n=function(){var n=Object(O.a)(k.a.mark(function n(r){var c,l,s,o,u;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),c=t.current.value,t.current.value="",l=a.current.value,c){n.next=6;break}return n.abrupt("return");case 6:return s=e.login.token,o='mutation {\n            addStack(stackInput: { url: "'.concat(c,'", tag: "').concat(l,'"}){\n              url\n              title\n              tag\n              thumbnail\n              creator{\n                name\n                stacks{\n                  title\n                  url\n                  tag\n                  thumbnail\n                }\n              }\n            }\n          }'),u={query:o},n.next=12,fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()}).then(function(t){var a=t.data.addStack,n=a.title,r=a.url,c=a.creator,l={title:n,url:r,tag:a.tag,thumbnail:a.thumbnail},s=[].concat(Object(i.a)(c.stacks),[l]);e.addStack(s)}).catch(function(e){console.log(e)});case 12:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("div",{className:"stack-bar"},r.a.createElement("form",{onSubmit:n},r.a.createElement("input",{ref:t,className:"stack-bar_url",type:"input",placeholder:"https://"}),r.a.createElement("select",{ref:a,className:"stack-bar_tag"},r.a.createElement("option",null,"tags"),e.user.items.tag.map(function(e,t){return r.a.createElement("option",{key:t,value:e.name},e.name)})),r.a.createElement("input",{className:"stack-bar_btn",type:"submit",value:"STACK"})))}),F=function(e){var t=e.pp,a=e.userName,n=e.subName;return r.a.createElement("div",{className:"user-profile"},r.a.createElement("div",{className:"user-profile_picture"},r.a.createElement("img",{src:t,alt:"profile"})),r.a.createElement("div",{className:"user-profile_name"},r.a.createElement("p",{className:"user-profile_name-sub"},n),r.a.createElement("p",{className:"user-profile_name-main"},a)))},q=a(64),L=a.n(q),R="stack",G="history",K=function(){return r.a.createElement("div",{className:"coming-soon"},r.a.createElement("p",null,"coming soon..."))},J=function(e){var t=Object(n.useState)("stack"),a=Object(N.a)(t,2),c=a[0],l=a[1],s=function(e){l(e)};return r.a.createElement("div",{className:"user-activity"},r.a.createElement("ul",{className:"user-activity_tabs"},r.a.createElement("li",{className:L()("user-activity_tabs_tab",{active:c===R}),onClick:function(){s(R)}},"STACK"),r.a.createElement("li",{className:L()("user-activity_tabs_tab",{active:c===G}),onClick:function(){s(G)}},"HISTORY")),r.a.createElement("div",{className:"user-activity_content"},c===R?r.a.createElement(K,null):null,c===G?r.a.createElement(K,null):null))},B=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(A.a)(this,Object(D.a)(t).call(this,e))).props.login.status||(console.log("out"),a.props.history.push("/")),a}return Object(I.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{history:this.props.history}),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"wrapper my"},r.a.createElement(x,null),r.a.createElement("div",{className:"contents-wrapper"},r.a.createElement(F,{pp:"../img/DOLF_spotify.jpeg",userName:this.props.user.name}),r.a.createElement(J,null)))))}}]),t}(r.a.Component),V=Object(s.b)(function(e){return{login:e.login,user:e.user}})(B),z=function(e){var t=e.url,a=e.title,n=e.dateAdded,c=e.siteUrl,l=e.thumbnail,s=e.type,o={background:" linear-gradient(rgba(246, 250, 250, .2), rgba(255, 231, 231, .9)), url(".concat(l,")"),backgroundSize:"cover",backgroundPosition:"center"};return r.a.createElement(r.a.Fragment,null,"tag"===s?r.a.createElement(u.b,{to:"/tag/".concat(a),className:"stack-item"},r.a.createElement("p",{className:"stack-item_title"},a),r.a.createElement("p",{className:"stack-item_date"},n),r.a.createElement("p",{className:"stack-item_site"},c)):r.a.createElement("a",{href:t,className:"stack-item",style:l?o:null,target:"_blunk"},r.a.createElement("p",{className:"stack-item_title"},a),r.a.createElement("p",{className:"stack-item_date"},n),r.a.createElement("p",{className:"stack-item_site"},c)))},H=function(e){var t=e.items,a=e.modalSwitch,n=t;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"items"},r.a.createElement("div",{className:"tag-header"},r.a.createElement("h2",{className:"items_label"},"TAG"),r.a.createElement("input",{className:"new-tag_btn",type:"button",defaultValue:"New Tag",onClick:a})),r.a.createElement("ul",{className:"stack-items"},n.map(function(e,t){return r.a.createElement("li",{key:t,className:"stack-items_item"},r.a.createElement(z,{url:e.url,title:e.name,type:"tag"}))}))))},M=function(e){var t=e.label,a=e.items;return r.a.createElement("div",{className:"items"},r.a.createElement("h2",{className:"items_label"},t),r.a.createElement("ul",{className:"stack-items"},a.map(function(e,t){return r.a.createElement("li",{className:"stack-items_item",key:t},r.a.createElement(z,{url:e.url,title:e.title,dateAdded:e.dateAdded,siteUrl:e.siteUrl,thumbnail:e.thumbnail}))})))},Y=Object(s.b)(function(e){return{login:e.login,user:e.user}},{createTag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{payload:{newTag:e},type:b}}})(function(e){var t=e.modalSwitch,a=r.a.createRef();return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal_body"},r.a.createElement("form",{onSubmit:function(n){n.preventDefault();var r=a.current.value;if(r){var c={query:'mutation {\n            createTag(tagInput: {name: "'.concat(r,'"}){\n              name\n              creator{\n                name\n                tags{\n                    name\n                }\n                stacks{\n                    title\n                    url\n                }\n              }\n            }\n          }')},l=e.login.token;fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()}).then(function(t){var a=t.data.createTag,n=a.name,r=a.creator,c={name:n},l=[].concat(Object(i.a)(r.tags),[c]);e.createTag(l)}).catch(function(e){console.log(e)}),t()}}},r.a.createElement("input",{ref:a,className:"modal_body_input",placeholder:"New TAG"}),r.a.createElement("input",{className:"modal_body_btn",type:"submit",value:"Create"})),r.a.createElement("div",{className:"modal_body_close",onClick:t},"x")))}),Q=Object(s.b)(function(e){return{login:e.login,user:e.user}})(function(e){e.login.status||e.history.push("/");var t=Object(n.useState)(!1),a=Object(N.a)(t,2),c=a[0],l=a[1],s=function(){return l(!c)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{history:e.history}),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"wrapper stack"},r.a.createElement(x,null),r.a.createElement("div",{className:"contents-wrapper"},r.a.createElement(H,{items:e.user.items.tag,modalSwitch:s}),r.a.createElement(M,{label:"STACKED",items:e.user.items.stack}))),c&&r.a.createElement(Y,{modalSwitch:s})))}),W=Object(s.b)(function(e){return{login:e.login,user:e.user}})(function(e){var t=e.match.params.tagName,a=e.user.items.stack.filter(function(e){return e.tag===t});return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{history:e.history}),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"wrapper stack"},r.a.createElement(x,null),r.a.createElement("div",{className:"contents-wrapper"},r.a.createElement("div",{className:"items"},r.a.createElement("div",{className:"tag-header"},r.a.createElement("h2",{className:"items_label"},t),r.a.createElement("input",{className:"new-tag_btn",type:"button",defaultValue:"Back",onClick:function(){e.history.push("/stack")}})),r.a.createElement("ul",{className:"stack-items"},a.map(function(e,t){return r.a.createElement("li",{key:t,className:"stack-items_item"},r.a.createElement(z,{url:e.url,title:e.title,thumbnail:e.thumbnail}))})))))))}),X=Object(s.b)(function(e){return{login:e.login,user:e.user}},{fetchUser:y})(function(e){if(console.log(e),e.user.id&&!e.user.name){var t={query:'query {\n                user(userId: "'.concat(e.user.id,'"){\n                name\n                stacks{\n                  title\n                  url\n                  thumbnail\n                  tag\n                }\n                tags{\n                  name\n                }\n              }\n            }')};fetch("http://localhost:8000/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()}).then(function(t){var a={name:t.data.user.name,items:{stack:Object(i.a)(t.data.user.stacks),tag:Object(i.a)(t.data.user.tags)}};e.fetchUser(a)}).catch(function(e){console.log(e)})}return r.a.createElement(u.a,null,r.a.createElement(m.a,{exact:!0,path:"/",component:T}),r.a.createElement(m.a,{path:"/my",component:V}),r.a.createElement(m.a,{path:"/stack",component:Q}),r.a.createElement(m.a,{path:"/tag/:tagName",component:W}))});function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ee=Object(o.b)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.payload;case"LOGOUT":return{token:null,status:null};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER":return $({},e,{},t.payload);case"LOGOUT":return{id:null,name:null,items:{stack:[],tag:[]}};case"CREATE_TAG":return $({},e,{items:$({},e.items,{tag:Object(i.a)(t.payload.newTag)})});case"ADD_STACK":return $({},e,{items:$({},e.items,{stack:Object(i.a)(t.payload.newStack)})});default:return e}}}),te=(a(204),Object(o.c)(ee,{login:{token:null,status:null},user:{id:null,name:null,history:null,items:{stack:[],tag:[]}}}));l.a.render(r.a.createElement(s.a,{store:te},r.a.createElement(X,null)),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.06fd4ce8.chunk.js.map